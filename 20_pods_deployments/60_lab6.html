<!DOCTYPE html>
<html lang="en" class="js csstransforms3d">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="generator" content="Hugo 0.88.1" />
    <meta name="description" content="">


    <link rel="icon" href="/kubernetes-workshop-source/images/favicon.png" type="image/png">

    <title>Labels :: kubernetes workshop</title>

    
    <link href="/kubernetes-workshop-source/css/nucleus.css?1633710183" rel="stylesheet">
    <link href="/kubernetes-workshop-source/css/fontawesome-all.min.css?1633710183" rel="stylesheet">
    <link href="/kubernetes-workshop-source/css/hybrid.css?1633710183" rel="stylesheet">
    <link href="/kubernetes-workshop-source/css/featherlight.min.css?1633710183" rel="stylesheet">
    <link href="/kubernetes-workshop-source/css/perfect-scrollbar.min.css?1633710183" rel="stylesheet">
    <link href="/kubernetes-workshop-source/css/auto-complete.css?1633710183" rel="stylesheet">
    <link href="/kubernetes-workshop-source/css/atom-one-dark-reasonable.css?1633710183" rel="stylesheet">
    <link href="/kubernetes-workshop-source/css/theme.css?1633710183" rel="stylesheet">
    <link href="/kubernetes-workshop-source/css/tabs.css?1633710183" rel="stylesheet">
    <link href="/kubernetes-workshop-source/css/hugo-theme.css?1633710183" rel="stylesheet">
    
    <link href="/kubernetes-workshop-source/css/theme-blue.css?1633710183" rel="stylesheet">
    
    

    <script src="/kubernetes-workshop-source/js/jquery-3.3.1.min.js?1633710183"></script>

    <style>
      :root #header + #content > #left > #rlblock_left{
          display:none !important;
      }
      
    </style>
    
  </head>
  <body class="" data-url="/kubernetes-workshop-source/20_pods_deployments/60_lab6.html">
    <nav id="sidebar" class="showVisitedLinks">



  <div id="header-wrapper">
    <div id="header">
      <a href=".."><img src="https://github.com/unixdaddy/kubernetes-workshop-source/blob/main/static/images/ihor-dvoretskyi2-unsplash.jpg?raw=false" width="300" height="150" alt=""></a>

    </div>
    
        <div class="searchbox">
    <label for="search-by"><i class="fas fa-search"></i></label>
    <input data-search-input id="search-by" type="search" placeholder="Search...">
    <span data-search-clear=""><i class="fas fa-times"></i></span>
</div>

<script type="text/javascript" src="/kubernetes-workshop-source/js/lunr.min.js?1633710183"></script>
<script type="text/javascript" src="/kubernetes-workshop-source/js/auto-complete.js?1633710183"></script>
<script type="text/javascript">
    
        var baseurl = "https:\/\/unixdaddy.github.io\/kubernetes-workshop-source\/";
    
</script>
<script type="text/javascript" src="/kubernetes-workshop-source/js/search.js?1633710183"></script>

    
  </div>
  

    <div class="highlightable">
    <ul class="topics">

        
          
          




 
  
    
    <li data-nav-id="/kubernetes-workshop-source/10_introduction.html" title="Introduction" class="dd-item
        
        
        
        ">
      <a href="/kubernetes-workshop-source/10_introduction.html">
          <b>1. </b>Introduction
          
            <i class="fas fa-check read-icon"></i>
          
      </a>
      
      
        <ul>
          
          
          

        
          
            
            




 
  
    
      <li data-nav-id="/kubernetes-workshop-source/10_introduction/10_introduction.html" title="Introduction" class="dd-item ">
        <a href="/kubernetes-workshop-source/10_introduction/10_introduction.html">
        <b>A. </b>Introduction
        <i class="fas fa-check read-icon"></i>
        </a>
    </li>
     
  
 

            
          
            
            




 
  
    
      <li data-nav-id="/kubernetes-workshop-source/10_introduction/20_people.html" title="Our People" class="dd-item ">
        <a href="/kubernetes-workshop-source/10_introduction/20_people.html">
        <b>B. </b>Our People
        <i class="fas fa-check read-icon"></i>
        </a>
    </li>
     
  
 

            
          
        
        </ul>
      
    </li>
  
 

          
          




 
  
    
    <li data-nav-id="/kubernetes-workshop-source/20_pods_deployments.html" title="Pods and Deployments" class="dd-item
        parent
        
        
        ">
      <a href="/kubernetes-workshop-source/20_pods_deployments.html">
          <b>2. </b>Pods and Deployments
          
            <i class="fas fa-check read-icon"></i>
          
      </a>
      
      
        <ul>
          
          
          

        
          
            
            




 
  
    
      <li data-nav-id="/kubernetes-workshop-source/20_pods_deployments/10_lab1.html" title="Pods" class="dd-item ">
        <a href="/kubernetes-workshop-source/20_pods_deployments/10_lab1.html">
        <b>A. </b>Pods
        <i class="fas fa-check read-icon"></i>
        </a>
    </li>
     
  
 

            
          
            
            




 
  
    
      <li data-nav-id="/kubernetes-workshop-source/20_pods_deployments/20_lab2.html" title="Managing Deployments" class="dd-item ">
        <a href="/kubernetes-workshop-source/20_pods_deployments/20_lab2.html">
        <b>B. </b>Managing Deployments
        <i class="fas fa-check read-icon"></i>
        </a>
    </li>
     
  
 

            
          
            
            




 
  
    
      <li data-nav-id="/kubernetes-workshop-source/20_pods_deployments/30_lab3.html" title="Pods and Deployments" class="dd-item ">
        <a href="/kubernetes-workshop-source/20_pods_deployments/30_lab3.html">
        <b>C. </b>Pods and Deployments
        <i class="fas fa-check read-icon"></i>
        </a>
    </li>
     
  
 

            
          
            
            




 
  
    
      <li data-nav-id="/kubernetes-workshop-source/20_pods_deployments/40_lab4.html" title="Deploying to a Namespace" class="dd-item ">
        <a href="/kubernetes-workshop-source/20_pods_deployments/40_lab4.html">
        <b>D. </b>Deploying to a Namespace
        <i class="fas fa-check read-icon"></i>
        </a>
    </li>
     
  
 

            
          
            
            




 
  
    
      <li data-nav-id="/kubernetes-workshop-source/20_pods_deployments/50_lab5.html" title="Querying Resources" class="dd-item ">
        <a href="/kubernetes-workshop-source/20_pods_deployments/50_lab5.html">
        <b>E. </b>Querying Resources
        <i class="fas fa-check read-icon"></i>
        </a>
    </li>
     
  
 

            
          
            
            




 
  
    
      <li data-nav-id="/kubernetes-workshop-source/20_pods_deployments/60_lab6.html" title="Labels" class="dd-item active">
        <a href="/kubernetes-workshop-source/20_pods_deployments/60_lab6.html">
        <b>F. </b>Labels
        <i class="fas fa-check read-icon"></i>
        </a>
    </li>
     
  
 

            
          
        
        </ul>
      
    </li>
  
 

          
          




 
  
    
    <li data-nav-id="/kubernetes-workshop-source/30_services.html" title="Services" class="dd-item
        
        
        
        ">
      <a href="/kubernetes-workshop-source/30_services.html">
          <b>3. </b>Services
          
            <i class="fas fa-check read-icon"></i>
          
      </a>
      
      
        <ul>
          
          
          

        
          
            
            




 
  
    
      <li data-nav-id="/kubernetes-workshop-source/30_services/10_lab3.html" title="Using Services" class="dd-item ">
        <a href="/kubernetes-workshop-source/30_services/10_lab3.html">
        <b>A. </b>Using Services
        <i class="fas fa-check read-icon"></i>
        </a>
    </li>
     
  
 

            
          
            
            




 
  
    
      <li data-nav-id="/kubernetes-workshop-source/30_services/20_lab4.html" title="NodePort Service" class="dd-item ">
        <a href="/kubernetes-workshop-source/30_services/20_lab4.html">
        <b>B. </b>NodePort Service
        <i class="fas fa-check read-icon"></i>
        </a>
    </li>
     
  
 

            
          
        
        </ul>
      
    </li>
  
 

          
          




 
  
    
    <li data-nav-id="/kubernetes-workshop-source/40_rbac.html" title="RBAC" class="dd-item
        
        
        
        ">
      <a href="/kubernetes-workshop-source/40_rbac.html">
          <b>4. </b>RBAC
          
            <i class="fas fa-check read-icon"></i>
          
      </a>
      
      
    </li>
  
 

          
          




 
  
    
    <li data-nav-id="/kubernetes-workshop-source/50_cluster.html" title="Cluster Management" class="dd-item
        
        
        
        ">
      <a href="/kubernetes-workshop-source/50_cluster.html">
          <b>5. </b>Cluster Management
          
            <i class="fas fa-check read-icon"></i>
          
      </a>
      
      
        <ul>
          
          
          

        
          
            
            




 
  
    
      <li data-nav-id="/kubernetes-workshop-source/50_cluster/10_lab7.html" title="TBC" class="dd-item ">
        <a href="/kubernetes-workshop-source/50_cluster/10_lab7.html">
        <b>A. </b>TBC
        <i class="fas fa-check read-icon"></i>
        </a>
    </li>
     
  
 

            
          
        
        </ul>
      
    </li>
  
 

          
          




 
  
    
    <li data-nav-id="/kubernetes-workshop-source/60_networking.html" title="Networking" class="dd-item
        
        
        
        ">
      <a href="/kubernetes-workshop-source/60_networking.html">
          <b>6. </b>Networking
          
            <i class="fas fa-check read-icon"></i>
          
      </a>
      
      
        <ul>
          
          
          

        
          
            
            




 
  
    
      <li data-nav-id="/kubernetes-workshop-source/60_networking/10_lab9.html" title="TBC" class="dd-item ">
        <a href="/kubernetes-workshop-source/60_networking/10_lab9.html">
        <b>A. </b>TBC
        <i class="fas fa-check read-icon"></i>
        </a>
    </li>
     
  
 

            
          
        
        </ul>
      
    </li>
  
 

          
          




 
  
    
    <li data-nav-id="/kubernetes-workshop-source/70_storage.html" title="Storage" class="dd-item
        
        
        
        ">
      <a href="/kubernetes-workshop-source/70_storage.html">
          <b>7. </b>Storage
          
            <i class="fas fa-check read-icon"></i>
          
      </a>
      
      
        <ul>
          
          
          

        
          
            
            




 
  
    
      <li data-nav-id="/kubernetes-workshop-source/70_storage/10_lab11.html" title="TBC" class="dd-item ">
        <a href="/kubernetes-workshop-source/70_storage/10_lab11.html">
        <b>A. </b>TBC
        <i class="fas fa-check read-icon"></i>
        </a>
    </li>
     
  
 

            
          
        
        </ul>
      
    </li>
  
 

          
          




 
  
    
    <li data-nav-id="/kubernetes-workshop-source/80_trouble.html" title="Troubleshooting" class="dd-item
        
        
        
        ">
      <a href="/kubernetes-workshop-source/80_trouble.html">
          <b>8. </b>Troubleshooting
          
            <i class="fas fa-check read-icon"></i>
          
      </a>
      
      
        <ul>
          
          
          

        
          
            
            




 
  
    
      <li data-nav-id="/kubernetes-workshop-source/80_trouble/10_lab11.html" title="TBC" class="dd-item ">
        <a href="/kubernetes-workshop-source/80_trouble/10_lab11.html">
        <b>A. </b>TBC
        <i class="fas fa-check read-icon"></i>
        </a>
    </li>
     
  
 

            
          
        
        </ul>
      
    </li>
  
 

          
        
    </ul>

    
    
      <section id="shortcuts">
        <h3>More</h3>
        <ul>
          
              <li>
                  <a class="padding" href="https://github.com/unixdaddy/kubernetes-workshop-source"><i class='fab fa-github'></i> Github repo</a>
              </li>
          
              <li>
                  <a class="padding" href="https://gohugo.io/"><i class='fas fa-bookmark'></i> Hugo Documentation</a>
              </li>
          
              <li>
                  <a class="padding" href="https://unixdaddy.github.io/kubernetes-workshop-source/tags"><i class='fas fa-tags'></i> Tags</a>
              </li>
          
        </ul>
      </section>
    

    
    <section id="prefooter">
      <hr/>
      <ul>
      

      
        <li><a class="padding" href="#" data-clear-history-toggle=""><i class="fas fa-history fa-fw"></i> Clear History</a></li>
      
      </ul>
    </section>
    
    <section id="footer">
      <p>Built with <a href="https://github.com/matcornic/hugo-theme-learn"><i class="fas fa-heart"></i></a> from <a href="https://getgrav.org">Grav</a> and <a href="https://gohugo.io/">Hugo</a></p>

    </section>
  </div>
</nav>




        <section id="body">
        <div id="overlay"></div>
        <div class="padding highlightable">
              
              <div>
                <div id="top-bar">
                
                
                <div id="breadcrumbs" itemscope="" itemtype="http://data-vocabulary.org/Breadcrumb">
                    <span id="sidebar-toggle-span">
                        <a href="#" id="sidebar-toggle" data-sidebar-toggle="">
                          <i class="fas fa-bars"></i>
                        </a>
                    </span>
                  
                  <span id="toc-menu"><i class="fas fa-list-alt"></i></span>
                  
                  <span class="links">
                 
                 
                    
          
          
            
            
          
          
            
            
          
          
            <a href='/kubernetes-workshop-source/'>Kubernetes Workshop</a> > <a href='/kubernetes-workshop-source/20_pods_deployments.html'>Pods and Deployments</a> > Labels
          
        
          
        
          
        
                 
                  </span>
                </div>
                
                    <div class="progress">
    <div class="wrapper">
<nav id="TableOfContents">
  <ul>
    <li><a href="#challenge">Challenge</a></li>
  </ul>
</nav>
    </div>
</div>

                
              </div>
            </div>
            
        <div id="head-tags">
        
<div class="tags">

  <a class="tag-link" href="/kubernetes-workshop-source/tags/deployments">deployments</a>

  <a class="tag-link" href="/kubernetes-workshop-source/tags/labels">labels</a>

</div>

        </div>
        
        <div id="body-inner">
          
            <h1>
              
              Labels
            </h1>
          

        


<h2 id="challenge">Challenge</h2>
<p>Create a namespace called <code>accounts</code> all the following steps need to be done in this namespace</p>
<p>Deploy a deployment named <code>redis-app</code> using the image <code>redis</code> with 2 replicas</p>
<ul>
<li>with labels <code>tier=prod</code> and <code>loc=north</code></li>
</ul>
<p>Deploy a deployment named <code>redis-db</code> using the image <code>redis:alpine</code> with 2 replicas</p>
<ul>
<li>with labels <code>tier=prod</code> and <code>loc=south</code></li>
<li>Expose the redis-db deployment on a port 6379.</li>
</ul>
<p>Use labels to query the pods</p>
<ul>
<li>list pod with label <code>tier=prod</code></li>
<li>list pods with label <code>loc=south</code></li>
</ul>
<p>Alter deployment <code>redis-app</code></p>
<ul>
<li>add label <code>region=emea</code></li>
<li>change label <code>tier=prod</code> to <code>tier=dev</code></li>
</ul>
<hr>

<div class="expand">
    <div class="expand-label" style="cursor: pointer;" onclick="$h = $(this);$h.next('div').slideToggle(100,function () {$h.children('i').attr('class',function () {return $h.next('div').is(':visible') ? 'fas fa-chevron-down' : 'fas fa-chevron-right';});});">
        <i style="font-size:x-small;" class="fas fa-chevron-right"></i>
        <span>
        
    	
    	Expand here to see the solution
    	
    	</span>
    </div>
    <div class="expand-content" style="display: none;">
        <h2 id="solution">Solution</h2>
<blockquote>
<p><a href="https://kubernetes.io/docs/concepts/workloads/controllers/deployment/">doc reference</a></p>
</blockquote>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash"><span style="color:#75715e"># create the namespace</span>
kubectl create ns accounts
<span style="color:#75715e"># create the deployments (imperative for speed)</span>
kubectl create deployment redis-app --image<span style="color:#f92672">=</span>redis --replicas<span style="color:#f92672">=</span><span style="color:#ae81ff">2</span> -n accounts
kubectl create deployment redis-db --image<span style="color:#f92672">=</span>redis:alpine --replicas<span style="color:#f92672">=</span><span style="color:#ae81ff">2</span> -n accounts 
<span style="color:#75715e"># expose redis-db</span>
kubectl expose deployment redis-db --port<span style="color:#f92672">=</span><span style="color:#ae81ff">6379</span> -n accounts
<span style="color:#75715e"># change the labels on the deployment</span>
kubectl label deployment redis-app tier<span style="color:#f92672">=</span>prod loc<span style="color:#f92672">=</span>north -n accounts
kubectl label deployment redis-db tier<span style="color:#f92672">=</span>prod loc<span style="color:#f92672">=</span>south -n accounts
</code></pre></div><blockquote>
<p>Are the deployments and there pods labelled the same? (ignore the pod-template-hash )
why?</p>
<blockquote>
<p>Because the label changes were made on the deployments after the pods were created (with the original labels).
You would need to label the pods as well to match or restart the deployments to have matching labels</p>
</blockquote>
</blockquote>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash"><span style="color:#75715e"># list pods with tier=prod</span>
kubectl get pods -n accounts -l tier<span style="color:#f92672">=</span>prod
<span style="color:#75715e"># list pods with loc=south</span>
kubectl get pods -n accounts -l loc<span style="color:#f92672">=</span>south

<span style="color:#75715e"># Add labels on deployment </span>
kubectl label deployment redis-app region<span style="color:#f92672">=</span>emea-n accounts
<span style="color:#75715e"># Modify labels. As the label exists we need the overwrite option</span>
kubectl label deployment redis-app tier<span style="color:#f92672">=</span>dev --overwrite -n accounts

</code></pre></div>
    </div>
</div>


<footer class="footline">
	
</footer>

        
        </div>
        

      </div>

    <div id="navigation">
        
        

        
            
            
                
                    
                    
                
                

                    
                    
                        
                    
                    

                    
                        
            
            
                
                    
                        
                        
                    
                
                

                    
                    
                    

                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                    
                
                

                    
                    
                    

                    
            
        
                    
            
        
                    
                        
            
            
                
                    
                        
                        
                    
                
                

                    
                    
                    

                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
            
        
                    
            
        

        


	 
	 
		
			<a class="nav nav-prev" href="/kubernetes-workshop-source/20_pods_deployments/50_lab5.html" title="Querying Resources"> <i class="fa fa-chevron-left"></i></a>
		
		
			<a class="nav nav-next" href="/kubernetes-workshop-source/30_services.html" title="Services" style="margin-right: 0px;"><i class="fa fa-chevron-right"></i></a>
		
	
    </div>

    </section>

    <div style="left: -1000px; overflow: scroll; position: absolute; top: -1000px; border: none; box-sizing: content-box; height: 200px; margin: 0px; padding: 0px; width: 200px;">
      <div style="border: none; box-sizing: content-box; height: 200px; margin: 0px; padding: 0px; width: 200px;"></div>
    </div>
    <script src="/kubernetes-workshop-source/js/clipboard.min.js?1633710183"></script>
    <script src="/kubernetes-workshop-source/js/perfect-scrollbar.min.js?1633710183"></script>
    <script src="/kubernetes-workshop-source/js/perfect-scrollbar.jquery.min.js?1633710183"></script>
    <script src="/kubernetes-workshop-source/js/jquery.sticky.js?1633710183"></script>
    <script src="/kubernetes-workshop-source/js/featherlight.min.js?1633710183"></script>
    <script src="/kubernetes-workshop-source/js/highlight.pack.js?1633710183"></script>
    <script>hljs.initHighlightingOnLoad();</script>
    <script src="/kubernetes-workshop-source/js/modernizr.custom-3.6.0.js?1633710183"></script>
    <script src="/kubernetes-workshop-source/js/learn.js?1633710183"></script>
    <script src="/kubernetes-workshop-source/js/hugo-learn.js?1633710183"></script>
    
        
            <script src="/kubernetes-workshop-source/mermaid/mermaid.js?1633710183"></script>
        
        <script>
            mermaid.initialize({ startOnLoad: true });
        </script>
    
    

  </body>
</html>

