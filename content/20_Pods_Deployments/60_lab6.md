---
title: "Labels"
weight: 60
draft : false
pre: "<b>F. </b>"
tags: ["deployments", "services"] 
---
## Challenge

Create a namespace called `accounts`
Deploy a deployment named `redis-app` using the image `redis` with 2 replicas
- with labels `tier=prod` and `loc=north` in `accounts` namespace
Deploy a deployment named `redis-db` using the image `redis:alpine` with 2 replicas
- with labels `tier=prod` and `loc=south` in `accounts` namespace
- Expose the redis-db deployment on a port 6379.

Use labels to query the pods
- list pod with label `tier=prod`
- list pods with label `loc=south`

Alter deployment `redis-app`
- add label `region=emea`
- change label `tier=prod` to `tier=dev`


---
{{%expand "Expand here to see the solution" %}}
## Solution

> [doc reference](https://kubernetes.io/docs/concepts/workloads/controllers/deployment/)

```bash
# create the namespace
kubectl create ns accounts
# create the deployments + add the labels (imperative for speed)
kubectl create deployment redis-app --image=redis --replicas=2 -n accounts
kubectl label deployment redis-app tier=prod loc=north -n accounts
kubectl create deployment redis-db --image=redis:alpine --replicas=2 -n accounts 
kubectl label deployment redis-db tier=prod loc=south -n accounts
# expose redis-db
kubectl expose deployment redis-db --port=6379 -n accounts
```
> Is the deployment and the pods labelled the same? (ignore the pod-template-hash )
> why?
>> because the replicaset is manages the pod and the label changes take place at the deployment level

{{% /expand %}}
