---
title: "Pods and Deployments"
weight: 30
draft : false
pre: "<b>C. </b>"
---

Challenge Labs

---
## Lab - PODS and DEPLOYMENTS

Use `kubectl` to

- Create a `pod` called `pod-1`
  - image 'nginx'
- Create a `pod` called `redis`
  - image 'redis:1.99'  
  - identify the problem with the pod
  - rectify the problem with the pod
- Create a `deployment` called `busybox-1`
  - image 'busybox'  
  - with 3 replicas 
  - and commmand `sleep 3600`
- Update the `deployment` called `busybox-1`
  - image `ubuntu`

---

{{%expand "Expand here to see the solution" %}}

{{% notice warning %}}
It is Bad practice not to specify the image tag as it will default to 'latest', best practice is to specify the image tag
{{% /notice %}}

## Solution

> [doc reference](https://kubernetes.io/docs/concepts/workloads/controllers/deployment/)


```bash
# create pod-1 pod
kubectl run pod-1 --image=nginx
# create redis pod
kubectl run redis --image=redis:1.99
# see error see error = ErrImagePull
kubectl get pod redis
# see errors in Events section = ImagePullBackOff
kubectl describe pod redis 
# fix redis pod using redis image (lastest image - bad in prodution) 
kubectl set image pod redis redis=redis
# create deployment called busybox-1 declarative
kubectl create deployment busybox-1 --image=busybox --replicas=3 --dry-run=client -o yaml -- sleep 3600 > busybox-1.yaml
kubectl apply -f busybox-1.yaml
# OR (imperative)  
kubectl create deployment busybox-1 --image=busybox --replicas=3 -- sleep 3600
# alter the image of deployment busybox-1
kubectl set image deployment busybox-1 busybox=ubuntu

```
{{% /expand %}}
